I"Ì[<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function swiper(options) {
      var $window = $(window), $root = this, $swiperWrapper, $swiperSlides, $swiperButtonPrev, $swiperButtonNext,
        initialSlide, animation, onChange, onChangeEnd,
        rootWidth, count, preIndex, curIndex, translateX, CRITICAL_ANGLE = Math.PI / 3;

      function setOptions(options) {
        var _options = options || {};
        initialSlide = _options.initialSlide || 0;
        animation = _options.animation === undefined && true;
        onChange = onChange || _options.onChange;
        onChangeEnd = onChangeEnd || _options.onChangeEnd;
      }

      function init() {
        $swiperWrapper = $root.find('.swiper__wrapper');
        $swiperSlides = $root.find('.swiper__slide');
        $swiperButtonPrev = $root.find('.swiper__button--prev');
        $swiperButtonNext = $root.find('.swiper__button--next');
        animation && $swiperWrapper.addClass('swiper__wrapper--animation');
        calc(true);
      }

      function preCalc() {
        rootWidth = $root.width();
        count = $swiperWrapper.children('.swiper__slide').length;
        if (count < 2) {
          $swiperButtonPrev.addClass('d-none');
          $swiperButtonNext.addClass('d-none');
        }
        curIndex = initialSlide || 0;
        translateX = getTranslateXFromCurIndex();
      }

      var calc = (function() {
        var preAnimation, $swiperSlide, $preSwiperSlide;
        return function (needPreCalc, params) {
          needPreCalc && preCalc();
          var _animation = (params && params.animation !== undefined) ? params.animation : animation;
          if (preAnimation === undefined || preAnimation !== _animation) {
            preAnimation = _animation ? $swiperWrapper.addClass('swiper__wrapper--animation') :
              $swiperWrapper.removeClass('swiper__wrapper--animation');
          }
          if (preIndex !== curIndex) {
            ($preSwiperSlide = $swiperSlides.eq(preIndex)).removeClass('active');
            ($swiperSlide = $swiperSlides.eq(curIndex)).addClass('active');
            onChange && onChange(curIndex, $swiperSlides.eq(curIndex), $swiperSlide, $preSwiperSlide);
            if (onChangeEnd) {
              if (_animation) {
                setTimeout(function() {
                  onChangeEnd(curIndex, $swiperSlides.eq(curIndex), $swiperSlide, $preSwiperSlide);
                }, 400);
              } else {
                onChangeEnd(curIndex, $swiperSlides.eq(curIndex), $swiperSlide, $preSwiperSlide);
              }
            }
            preIndex = curIndex;
          }
          $swiperWrapper.css('transform', 'translate(' + translateX + 'px, 0)');
          if (count > 1) {
            if (curIndex <= 0) {
              $swiperButtonPrev.addClass('disabled');
            } else {
              $swiperButtonPrev.removeClass('disabled');
            }
            if (curIndex >= count - 1) {
              $swiperButtonNext.addClass('disabled');
            } else {
              $swiperButtonNext.removeClass('disabled');
            }
          }
        };
      })();

      function getTranslateXFromCurIndex() {
        return curIndex <= 0 ? 0 : - rootWidth * curIndex;
      }

      function moveToIndex(index ,params) {
        preIndex = curIndex;
        curIndex = index;
        translateX = getTranslateXFromCurIndex();
        calc(false, params);
      }

      function move(type) {
        var nextIndex = curIndex, unstableTranslateX;
        if (type === 'prev') {
          nextIndex > 0 && nextIndex--;
        } else if (type === 'next') {
          nextIndex < count - 1 && nextIndex++;
        }
        if (type === 'cur') {
          moveToIndex(curIndex, { animation: true });
          return;
        }
        unstableTranslateX = translateX % rootWidth !== 0;
        if (nextIndex !== curIndex || unstableTranslateX) {
          unstableTranslateX ? moveToIndex(nextIndex, { animation: true }) : moveToIndex(nextIndex);
        }
      }

      setOptions(options);
      init();
      preIndex = curIndex;

      $swiperButtonPrev.on('click', function(e) {
        e.stopPropagation();
        move('prev');
      });
      $swiperButtonNext.on('click', function(e) {
        e.stopPropagation();
        move('next');
      });
      $window.on('resize', function() {
        calc(true, { animation: false });
      });

      (function() {
        var pageX, pageY, velocityX, preTranslateX = translateX, timeStamp, touching;
        function handleTouchstart(e) {
          var point = e.touches ? e.touches[0] : e;
          pageX = point.pageX;
          pageY = point.pageY;
          velocityX = 0;
          preTranslateX = translateX;
        }
        function handleTouchmove(e) {
          if (e.touches && e.touches.length > 1) {
            return;
          }
          var point = e.touches ? e.touches[0] : e;
          var deltaX = point.pageX - pageX;
          var deltaY = point.pageY - pageY;
          velocityX = deltaX / (e.timeStamp - timeStamp);
          timeStamp = e.timeStamp;
          if (e.cancelable && Math.abs(Math.atan(deltaY / deltaX)) < CRITICAL_ANGLE) {
            touching = true;
            translateX += deltaX;
            calc(false, { animation: false });
          }
          pageX = point.pageX;
          pageY = point.pageY;
        }
        function handleTouchend() {
          touching = false;
          var deltaX = translateX - preTranslateX;
          var distance = deltaX + velocityX * rootWidth;
          if (Math.abs(distance) > rootWidth / 2) {
            distance > 0 ? move('prev') : move('next');
          } else {
            move('cur');
          }
        }
        $swiperWrapper.on('touchstart', handleTouchstart);
        $swiperWrapper.on('touchmove', handleTouchmove);
        $swiperWrapper.on('touchend', handleTouchend);
        $swiperWrapper.on('touchcancel', handleTouchend);

        (function() {
          var pressing = false, moved = false;
          $swiperWrapper.on('mousedown', function(e) {
            pressing = true; handleTouchstart(e);
          });
          $swiperWrapper.on('mousemove', function(e) {
            pressing && (e.preventDefault(), moved = true, handleTouchmove(e));
          });
          $swiperWrapper.on('mouseup', function(e) {
            pressing && (pressing = false, handleTouchend(e));
          });
          $swiperWrapper.on('mouseleave', function(e) {
            pressing && (pressing = false, handleTouchend(e));
          });
          $swiperWrapper.on('click', function(e) {
            moved && (e.stopPropagation(), moved = false);
          });
        })();

        $root.on('touchmove', function(e) {
          if (e.cancelable & touching) {
            e.preventDefault();
          }
        });
      })();

      return {
        setOptions: setOptions,
        previous: function(){
          move('prev');
        },
        next: function(){
          move('next');
        },
        refresh: function() {
          calc(true, { animation: false });
        }
      };
    }
    $.fn.swiper = swiper;
  });
})();var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $('.swiper-demo').swiper();
  });
</script>

<h2 id="overview">Overview</h2>

<p>Racing is one of the ultimate challenges which involves high-speed and high-risk decision making while operating vehicles near their physical limits. Learn-to-Race is a <a href="https://gym.openai.com/">Gym</a> compliant framework provides agents with the ability to interact with a powerful racing simulation environment. The objective of this challenge is to explore the area of safe policy optimisation in greater detail on this difficult task.</p>

<p>Participants will be evaluated on their racing performance on an unseen track, the North Road Track at the Las Vegas Motor Speedway, <em>left</em>, but have the opportunity to explore the environment with unfrozen model weights for a 1-hour prior to evaluation laps similar to a professional race car driver‚Äôs practice session. They will also have access to the <a href="https://www.angleseycircuit.com/">Anglesey National</a>, <em>middle</em>, and <a href="https://thruxtonracing.co.uk/">Thruxton Circuit</a>, <em>right</em>, racetracks to train their agents.</p>

<div class="swiper swiper-demo">
  <div class="swiper__wrapper">
    <div class="swiper__slide">
      <img src="/learn-to-race-challenge/assets/images/challenge/lvms-overhead.png" alt="LVMS" />
    </div>
    <div class="swiper__slide">
      <img src="/learn-to-race-challenge/assets/images/challenge/anglesey-overhead.png" alt="LVMS" />
    </div>
    <div class="swiper__slide">
      <img src="/learn-to-race-challenge/assets/images/challenge/thruxton-overhead.png" alt="LVMS" />
    </div>
  </div>
  <div class="swiper__button swiper__button--prev fas fa-chevron-left"></div>
  <div class="swiper__button swiper__button--next fas fa-chevron-right"></div>
</div>

<h2 id="rules">Rules</h2>

<p>The task is to Learn-to-Race, so complete or over-reliance on classical planning methods is not allowed. Additionally, participants will be:</p>

<ul>
  <li>limited to <strong>1</strong> submission every 24 hours</li>
  <li>restricted from accessing model weights or custom logs during evalation</li>
  <li>required to submit source code, for top performers</li>
</ul>

<h3 id="action-space">Action Space</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Action</th>
      <th style="text-align: center">Type</th>
      <th style="text-align: center">Range</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Steering</td>
      <td style="text-align: center">Continuous</td>
      <td style="text-align: center"><em>[-1.0, 1.0]</em></td>
    </tr>
    <tr>
      <td style="text-align: center">Acceleration</td>
      <td style="text-align: center">Continuous</td>
      <td style="text-align: center"><em>[-1.0, 1.0]</em></td>
    </tr>
  </tbody>
</table>

<h3 id="observation-space">Observation Space</h3>

<p>We do not restrict the usage of segmentation cameras nor the placement of cameras, including off-vehicle, during training. During evaluation, agents will only have access to RGB images from cameras placed on the front, right, and left of the vehicle as well as pose information.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">observation</span> <span class="o">=</span>
<span class="p">{</span>
  <span class="s">'CameraFrontRGB'</span><span class="p">:</span> <span class="n">front_img</span><span class="p">,</span> <span class="c1"># numpy array of shape (width, height, 3)
</span>  <span class="s">'CameraLeftRGB'</span><span class="p">:</span> <span class="n">left_img</span><span class="p">,</span> <span class="c1"># numpy array of shape (width, height, 3)
</span>  <span class="s">'CameraRightRGB'</span><span class="p">:</span> <span class="n">right_img</span><span class="p">,</span> <span class="c1"># numpy array of shape (width, height, 3)
</span>  <span class="s">'track_id'</span><span class="p">:</span> <span class="n">track_id</span><span class="p">,</span> <span class="c1"># integer value associated with a specific racetrack
</span>  <span class="s">'pose'</span><span class="p">:</span> <span class="n">pose_array</span> <span class="c1"># numpy array of shape (30,), more detail below
</span><span class="p">}</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">0</span><span class="pi">:</span> <span class="s">steering request</span>
<span class="na">1</span><span class="pi">:</span> <span class="s">gear request</span>
<span class="na">2</span><span class="pi">:</span> <span class="s">nearest track index</span>
<span class="na">3-5</span><span class="pi">:</span> <span class="s">direction velocity in m/s</span>
<span class="na">6-8</span><span class="pi">:</span> <span class="s">directional acceleration in m/s^2</span>
<span class="na">9-11</span><span class="pi">:</span> <span class="s">directional angular velocity</span>
<span class="na">12-14</span><span class="pi">:</span> <span class="s">vehicle yaw, pitch, and roll, respectively</span>
<span class="na">15-17</span><span class="pi">:</span> <span class="s">center of vehicle coordinates in the format (y, x, z)</span>
<span class="na">18-21</span><span class="pi">:</span> <span class="s">wheel revolutions per minute (per wheel)</span>
<span class="na">22-25</span><span class="pi">:</span> <span class="s">wheel braking (per wheel)</span>
<span class="na">26-29</span><span class="pi">:</span> <span class="s">wheel torque (per wheel)</span>
</code></pre></div></div>

<h2 id="evaluation">Evaluation</h2>

<h3 id="pre-evaluation-stage">Pre-Evaluation Stage</h3>

<p>All submissions will have access to the unseen evaluation racetrack for 1-hour with unfrozen model weights. Participants are free to perform any model updates or exploration strategies that they choose. Submissions that fail to begin the evaluation stage within 1-hour of starting pre-evaluation will not be accepted.</p>

<h3 id="evaluation-stage">Evaluation Stage</h3>

<p>The evaluation stage consists of <em>3</em> environment episodes beginning at the finish line of the evaluation racetrack. The official Learn-to-Race metrics will be recorded and displayed on the leaderboard following submission.</p>

<h3 id="submission-instructions">Submission Instructions</h3>

<h4 id="environment">Environment</h4>

<p>Your submission will be run in an Ubuntu 18.04, <a href="https://hub.docker.com/r/nvidia/cudagl">nvidia/cudagl</a> Docker image with Cuda 11.0.3 drivers. By default, a Python 3.6.9 environment is used, and we expect submissions to use Python3 versions &gt;= 3.6.9. The evaluation structure allows for a variety of Python3 environments:</p>

<ul>
  <li>For conda environments, include <code class="language-plaintext highlighter-rouge">environment.yml</code> in the top directory of your submission</li>
  <li>For pip3 installation, include <code class="language-plaintext highlighter-rouge">requirements.txt</code> in the top directory of your submission, run after the above step</li>
  <li>For Python3 virtual environments, include a directory named <code class="language-plaintext highlighter-rouge">venv</code> in the top directory of your submission, and our script will activate <code class="language-plaintext highlighter-rouge">venv/bin/activate</code></li>
</ul>

<h4 id="file-structure">File Structure</h4>

<p>You submission will be a single file named <code class="language-plaintext highlighter-rouge">submission.zip</code> which contains:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">.</span>
‚îÇ   <span class="c"># required files</span>
‚îú‚îÄ‚îÄ eval.py
‚îú‚îÄ‚îÄ conf.yml
‚îÇ
‚îÇ   <span class="c"># optional environment files &amp; directories</span>
‚îú‚îÄ‚îÄ environment.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ venv
‚îÇ   ‚îú‚îÄ‚îÄ bin
‚îÇ       ‚îú‚îÄ‚îÄ activate
‚îÇ        ...
‚îÇ   ‚îú‚îÄ‚îÄ include
‚îÇ   ...
‚îÇ
‚îÇ   <span class="c"># optional additional files</span>
‚îú‚îÄ‚îÄ <span class="o">(</span>model weights<span class="o">)</span>
‚îú‚îÄ‚îÄ <span class="o">(</span>additional utilities<span class="o">)</span>
‚îî‚îÄ‚îÄ ...
</code></pre></div></div>

<h4 id="evalpy">eval.py</h4>

<p>This is the primary file that you will modify and include in your submission. The <a href="https://github.com/hermgerm29/learn-to-race/blob/main/l2r/eval/eval.py">template</a> you will use is located in <code class="language-plaintext highlighter-rouge">l2r/eval/eval.py</code> in the Learn-to-Race repository. You are free to modify any methods that are marked <strong>‚ÄúModify this method‚Äù</strong>, and you will, at minimum, need to modify the following methods:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Evaluator.load_agent</code> to create your agent and load in policy weights</li>
  <li><code class="language-plaintext highlighter-rouge">Evaluator.pre_evaluate</code> to define your 1-hour pre-evaluation phase during which you will likely want to take gradient updates and perform exploration and fine-tuning on the new racetrack</li>
</ul>

<p>A variety of mechanisms are implemented to strictly check that <strong>‚ÄúDo not modify‚Äù</strong> methods are not modified, and submissions that do modify these methods will result in a thrown exception and no provided score.</p>

<h4 id="confyml">conf.yml</h4>

<p>The other required file is <code class="language-plaintext highlighter-rouge">conf.yml</code> which defines a number of configurations for the racing environment. A template of this file is shown below. We also impose a few modest restrictions including:</p>

<ul>
  <li>You must include the keys <code class="language-plaintext highlighter-rouge">env_kwargs</code> and <code class="language-plaintext highlighter-rouge">sim_kwargs</code> in the configuration</li>
  <li>You cannot use segmentation cameras during pre-evaluation or evaluation</li>
  <li>We impose a maximum limit of 1080 pixels for a single camera dimension</li>
  <li>A maximum observation delay of <code class="language-plaintext highlighter-rouge">0.15</code> seconds</li>
</ul>

<p>Furthermore, we recommend:</p>

<ul>
  <li>Not modifying any of the interface addresses</li>
  <li>Removing cameras that you don‚Äôt intend on using</li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">env_kwargs</span><span class="pi">:</span>
  <span class="na">multimodal</span><span class="pi">:</span> <span class="s">True</span>
  <span class="na">max_timesteps</span><span class="pi">:</span> <span class="m">500</span>
  <span class="na">obs_delay</span><span class="pi">:</span> <span class="m">0.1</span>
  <span class="na">not_moving_timeout</span><span class="pi">:</span> <span class="m">50</span>
  <span class="na">reward_pol</span><span class="pi">:</span> <span class="s1">'</span><span class="s">default'</span>
  <span class="na">reward_kwargs</span><span class="pi">:</span>
    <span class="na">oob_penalty</span><span class="pi">:</span> <span class="m">5.0</span>
    <span class="na">min_oob_penalty</span><span class="pi">:</span> <span class="m">25.0</span>
  <span class="c1"># Our script will replace controller_kwargs with the appropriate settings</span>
  <span class="na">controller_kwargs</span><span class="pi">:</span>
    <span class="na">sim_version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ArrivalSim-linux-0.7.0-cmu4'</span>
    <span class="na">quiet</span><span class="pi">:</span> <span class="s">True</span>
    <span class="na">user</span><span class="pi">:</span> <span class="s1">'</span><span class="s">ubuntu'</span>
    <span class="na">start_container</span><span class="pi">:</span> <span class="s">False</span>
    <span class="na">sim_path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/home/ArrivalSim-linux-0.7.0.182276/LinuxNoEditor'</span>
  <span class="na">action_if_kwargs</span><span class="pi">:</span>
    <span class="na">max_accel</span><span class="pi">:</span> <span class="s">6.</span>
    <span class="na">min_accel</span><span class="pi">:</span> <span class="s">3.</span>
    <span class="na">max_steer</span><span class="pi">:</span> <span class="m">0.2</span>
    <span class="na">min_steer</span><span class="pi">:</span> <span class="s">-0.2</span>
    <span class="na">ip</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0.0.0.0'</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">7077</span>
  <span class="na">pose_if_kwargs</span><span class="pi">:</span>
    <span class="na">ip</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0.0.0.0'</span>
    <span class="na">port</span><span class="pi">:</span> <span class="m">7078</span>
  <span class="na">cameras</span><span class="pi">:</span>
    <span class="na">CameraFrontRGB</span><span class="pi">:</span>
      <span class="na">Addr</span><span class="pi">:</span> <span class="s1">'</span><span class="s">tcp://0.0.0.0:8008'</span>
      <span class="na">Format</span><span class="pi">:</span> <span class="s">ColorBGR8</span>
      <span class="na">FOVAngle</span><span class="pi">:</span> <span class="m">90</span>
      <span class="na">Width</span><span class="pi">:</span> <span class="m">512</span>
      <span class="na">Height</span><span class="pi">:</span> <span class="m">384</span>
      <span class="na">bAutoAdvertise</span><span class="pi">:</span> <span class="s">True</span>
    <span class="na">CameraLeftRGB</span><span class="pi">:</span>
      <span class="na">Addr</span><span class="pi">:</span> <span class="s1">'</span><span class="s">tcp://0.0.0.0:8009'</span>
      <span class="na">Format</span><span class="pi">:</span> <span class="s">ColorBGR8</span>
      <span class="na">FOVAngle</span><span class="pi">:</span> <span class="m">90</span>
      <span class="na">Width</span><span class="pi">:</span> <span class="m">512</span>
      <span class="na">Height</span><span class="pi">:</span> <span class="m">384</span>
      <span class="na">bAutoAdvertise</span><span class="pi">:</span> <span class="s">True</span>
    <span class="na">CameraRightRGB</span><span class="pi">:</span>
      <span class="na">Addr</span><span class="pi">:</span> <span class="s1">'</span><span class="s">tcp://0.0.0.0:8010'</span>
      <span class="na">Format</span><span class="pi">:</span> <span class="s">ColorBGR8</span>
      <span class="na">FOVAngle</span><span class="pi">:</span> <span class="m">90</span>
      <span class="na">Width</span><span class="pi">:</span> <span class="m">512</span>
      <span class="na">Height</span><span class="pi">:</span> <span class="m">384</span>
      <span class="na">bAutoAdvertise</span><span class="pi">:</span> <span class="s">True</span>

<span class="na">sim_kwargs</span><span class="pi">:</span>
  <span class="na">racetrack</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">VegasNorthRoad'</span><span class="pi">]</span>
  <span class="na">driver_params</span><span class="pi">:</span>
    <span class="na">DriverAPIClass</span><span class="pi">:</span> <span class="s1">'</span><span class="s">VApiUdp'</span>
    <span class="na">DriverAPI_UDP_SendAddress</span><span class="pi">:</span> <span class="s1">'</span><span class="s">0.0.0.0'</span>
</code></pre></div></div>

<h3 id="metrics">Metrics</h3>

<p>Vestibulum bibendum, enim vitae scelerisque aliquam, nisi augue cursus leo, eget dignissim eros ex sit amet dolor. Donec risus ex, luctus id orci ut, ultricies accumsan sem. Vivamus eget semper diam. Duis eget purus malesuada, efficitur orci rhoncus, ultricies enim. Maecenas eu feugiat augue. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Praesent non lectus risus. Integer dictum consectetur urna. Sed porta dolor faucibus eros scelerisque, sit amet egestas magna fringilla. Nunc a cursus mi. Vivamus ut lectus nunc. Sed sit amet leo nibh. Ut dignissim eleifend suscipit.</p>
:ET